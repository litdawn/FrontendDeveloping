<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>1.jpg</title>
    <link rel="stylesheet" type="text/css" href="/stylesheets/detail_picture.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/button.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/svg_watermark.css">
</head>
<body>
    <svg id="svg" width="200" height="200" xmlns="http://www.w3.org/2000/svg">
        <text class="wm-text" x="50%" y="50%" font-size="30" fill="#a2a9b6" fill-opacity="0.3" font-family="system-ui, sans-serif" text-anchor="middle" dominant-baseline="middle" transform='rotate(-45, 100 100)'></text>
    </svg>
    <div class="watermark">
    </div>
    <button class="icon" id="user-icon" disabled>
        <img class="icon-img" src="/images/icon/user.jpg" alt="user">
    </button>
    <div id="username"></div>
    <div class="pic">
        <img src="/images/ori_img/1.jpg" alt="1.jpg"/>
    </div>


</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    function get_user_info() {
        const token = localStorage.getItem('token');
        // axios.defaults.headers.authorization = 'Bearer ' + token;
        axios.get('/api/get_user_info').then(res => {
            let login_button = document.getElementsByClassName('button-nav')[0];
            let user_info = document.getElementById('username');
            let user_icon = document.getElementById('user-icon');
            if (res.data.error_code === '0') {
                if (login_button)
                    login_button.remove();
                user_info.innerText = "user:" + res.data.info.username;
                console.log("已登录")
            } else {
                user_info.remove();
                user_icon.remove();
                console.log("未登录")
            }
        })
    }

    get_user_info();
</script>
</html>